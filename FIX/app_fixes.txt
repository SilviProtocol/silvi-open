
# Add these fixes to your app.py file:

# 1. Update imports at the top of app.py
import psycopg2
from datetime import timedelta

# 2. Update PostgreSQL configuration
app.config['POSTGRESQL_ENABLED'] = True
app.config['POSTGRESQL_CONFIG'] = {
    'db_connection': {
        'host': '167.172.143.162',
        'database': 'treekipedia',  # Make sure this is 'treekipedia', not 'biodiversity'
        'user': 'postgres',
        'password': '9353jeremic',
        'port': 5432
    }
}

# 3. Add the route for postgres-monitor template
@app.route('/postgres-monitor')
def postgres_monitor():
    """Render PostgreSQL monitoring dashboard."""
    if not app.config['POSTGRESQL_ENABLED']:
        flash('PostgreSQL integration is not enabled.', 'error')
        return redirect(url_for('index'))
    
    return render_template('postgres_monitor.html', 
                         blazegraph_status=check_blazegraph_status() if app.config['BLAZEGRAPH_ENABLED'] else False)

# 4. Make sure you have the postgres_monitor.html template in your templates folder
